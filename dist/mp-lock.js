(function(){const r=s=>{const t=document.querySelector(`${s} button[type='submit']`);t.disabled=!0},c=s=>{if(document.querySelector(s+" .input-group").classList.contains("error"))return;const n=document.querySelector(s+' button[type="submit"]');n.disabled=!1},l=s=>{const t=document.querySelector(`${s} .top-error`);t.style.display="none"},e=(s,t)=>{const n=s.closest(".input-group");n.addClass("error"),n.find(".error-message").html(t)},m=(s,t)=>{if(t){jQuery(`${s} .mp-loading`).show(),r(s);return}jQuery(`${s} .mp-loading`).hide(),c(s)},v=s=>/^\d+$/.test(s)?s.length>=5&&s.length<=14:!1,b=s=>{const t=window.location.origin,n=s.startsWith(t),o=!/[<>]/.test(s)&&!/^javascript:/i.test(s);n&&o?window.location.href=s:(window.location.href="/",console.warn("Unsafe redirect URL detected:",s))};jQuery(function(s){const t="#mp-login-form",n=s(t).find('input[name="log"]'),o=s(t).find('input[name="pwd"]');s(t).submit(function(a){a.preventDefault();const d={action:"login",log:n.val(),pwd:o.val(),rememberme:s(t).find("#rememberme").is(":checked"),redirect_to:s(t).find('input[name="redirect_to"]').val(),testcookie:s(t).find('input[name="testcookie"]').val()};l(t),m(t,!0),s.ajax({type:"POST",url:"/wp-admin/admin-ajax.php",data:d,success:function(u){if(u.data.code==="incorrect_password"&&(u.data.message=`<strong>Error:</strong> The password you entered for the email address <strong>${n.val()}</strong> is incorrect. <a href="/login?action=forgot_pass">Lost your password?</a>`),u.success){b(u.data.redirect_to);return}s(t).find(".top-error").html(`${u.data.message}`).show(),m(t,!1)},error:function(u){m(t,!1)}})}),n.on("blur",function(){const a=s(this).val();if(!a){e(s(this),"Email is required"),r(t);return}if(!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,})+$/.test(a)){e(s(this),"Email address is invalid."),r(t);return}l(t),s(this).closest(".input-group").removeClass("error"),s(this).closest(".input-group").find(".error-message").html(""),c(t)}),o.on("blur",function(){const a=s(this).val();if(!a){e(s(this),"Password is required"),r(t);return}if(!a.match(/^(?=.*\d)(?=.*[a-z]).{8,}$/)){e(s(this),"Password: min 8 chars, 1 letter, 1 number."),r(t);return}l(t),s(this).closest(".input-group").removeClass("error"),s(this).closest(".input-group").find(".error-message").html(""),c(t)})});jQuery(function(s){const t="#forget-password-form",n=s(t).find('input[name="user-login"]');s(t).submit(function(o){o.preventDefault();const a={action:"lostpassword",user_login:n.val()};l(t),m(t,!0),s.ajax({type:"POST",url:"/wp-admin/admin-ajax.php",data:a,success:function(d){if(!d.success){s(".top-error").html(d.data.message).show(),m(t,!1);return}const u=`<strong>Password reset link sent</strong>
                <p><small>Please click on the confirmation link that was just sent to your email address.</small></p>`;s(".forgot-success").html(u).show(),m(t,!1)}})}),n.on("blur",function(){const o=s(this).val();if(!o){e(s(this),"Username or Email field is required"),r(t);return}if(o.includes("@")&&!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,})+$/.test(o)){e(s(this),"Email address is invalid."),r(t);return}if(!/^[a-zA-Z0-9@.]+$/.test(o)){e(s(this),"Username must be alphanumeric characters."),r(t);return}l(t),s(this).closest(".input-group").removeClass("error"),s(this).closest(".input-group").find(".error-message").html(""),c(t)})});(function(s){s(document).ready(function(){const t="#reset-password-form",n=s(t).find('input[name="pwd"]'),o=s(t).find('input[name="confirm_pwd"]');s(t).on("submit",function(a){a.preventDefault();const d=s(this),u=d.find('input[name="key"]').val(),p=d.find('input[name="login"]').val();m(t,!0),s.ajax({url:"/wp-admin/admin-ajax.php",type:"POST",data:{action:"resetpassword",key:u,login:p,password:n.val()},beforeSend:function(){},success:function(f){if(!f.success){s(".top-error").html(f.data.message).show(),m(t,!1);return}const g=`<strong>Your password is reset.</strong>
            <p><small><a href="/login">Click here</a> login with your new password.</small></p>`;s(".reset-success").html(g).show(),m(t,!1)},error:function(){console.log("AJAX request failed")},complete:function(){}})}),n.on("blur",function(){const a=s(this).val();if(!a){e(s(this),"Password is required"),r(t);return}if(!a.match(/^(?=.*\d)(?=.*[a-z]).{8,}$/)){e(s(this),"Password: min 8 chars, 1 letter, 1 number."),r(t);return}s(this).closest(".input-group").removeClass("error"),s(this).closest(".input-group").find(".error-message").html(""),l(t),c(t)}),o.on("blur",function(){if(!s(this).val()){e(s(this),"Confirm password is required"),r(t);return}if(n.val()!==o.val()){e(s(this),"Password does not match"),e(o,"Password does not match"),r(t);return}s(o).closest(".input-group").removeClass("error"),s(o).closest(".input-group").find(".error-message").html(""),l(t),c(t)})})})(jQuery);jQuery(function(s){const t="#mp-signup-form",n=s(t).find('input[name="first_name"]'),o=s(t).find('input[name="last_name"]'),a=s(t).find('input[name="organization"]'),d=s(t).find('input[name="phone"]'),u=s(t).find('input[name="log"]'),p=s(t).find('input[name="pwd"]'),f=s(t).find('input[name="confirm_pwd"]'),g=s(t).find('input[name="nonce"]');s(t).submit(function(i){if(i.preventDefault(),!u.val()||!p.val()||!f.val()){s(t).find(".top-error").html("Please fill all fields").show();return}const w={action:"signup",log:u.val(),pwd:p.val(),phone:d.val(),organization:a.val(),first_name:n.val(),last_name:o.val(),nonce:g.val()};l(t),m(t,!0),s.ajax({type:"POST",url:"/wp-admin/admin-ajax.php",data:w,success:function(h){if(h.success){s(t).find(".signup-success").html(`${h.data.message}`).show(),u.val(""),p.val(""),f.val(""),a.val(""),n.val(""),o.val(""),d.val(""),m(t,!1),s("html, body").animate({scrollTop:0},"fast");return}s(t).find(".top-error").html(`${h.data.message}`).show(),u.val(""),p.val(""),f.val(""),m(t,!1)},error:function(h){m(t,!1)}})}),n.on("blur",function(){const i=s(this).val();if(!i){e(s(this),"First Name is required."),r(t);return}if(i.length<3){e(s(this),"First Name is too short"),r(t);return}l(t),s(this).closest(".input-group").removeClass("error"),s(this).closest(".input-group").find(".error-message").html(""),c(t)}),o.on("blur",function(){const i=s(this).val();if(!i){e(s(this),"Last Name is required."),r(t);return}if(i.length<3){e(s(this),"Last Name is too short"),r(t);return}l(t),s(this).closest(".input-group").removeClass("error"),s(this).closest(".input-group").find(".error-message").html(""),c(t)}),a.on("blur",function(){const i=s(this).val();if(!i){e(s(this),"Organization Name is required."),r(t);return}if(i.length<3){e(s(this),"Organization Name is too short"),r(t);return}l(t),s(this).closest(".input-group").removeClass("error"),s(this).closest(".input-group").find(".error-message").html(""),c(t)}),d.on("blur",function(){const i=s(this).val();if(i){if(!v(i)){e(s(this),"Phone number must be 5-8 digits."),r(t);return}l(t),s(this).closest(".input-group").removeClass("error"),s(this).closest(".input-group").find(".error-message").html(""),c(t)}}),u.on("blur",function(){const i=s(this).val();if(!i){e(s(this),"Email is required"),r(t);return}if(!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,})+$/.test(i)){e(s(this),"Email address is invalid."),r(t);return}l(t),s(this).closest(".input-group").removeClass("error"),s(this).closest(".input-group").find(".error-message").html(""),c(t)}),p.on("blur",function(){const i=s(this).val();if(!i){e(s(this),"Password is required"),r(t);return}if(!i.match(/^(?=.*\d)(?=.*[a-z]).{8,}$/)){e(s(this),"Password: min 8 chars, 1 letter, 1 number."),r(t);return}s(this).closest(".input-group").removeClass("error"),s(this).closest(".input-group").find(".error-message").html(""),l(t),c(t)}),f.on("blur",function(){if(!s(this).val()){e(s(this),"Confirm password is required"),r(t);return}if(p.val()!==f.val()){e(s(this),"Password does not match"),e(f,"Password does not match"),r(t);return}s(f).closest(".input-group").removeClass("error"),s(f).closest(".input-group").find(".error-message").html(""),l(t),c(t)})});
})();