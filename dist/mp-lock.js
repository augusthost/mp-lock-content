(function(){const r=s=>{const t=document.querySelector(`${s} button[type='submit']`);t.disabled=!0},c=s=>{if(document.querySelector(s+" .input-group").classList.contains("error"))return;const o=document.querySelector(s+' button[type="submit"]');o.disabled=!1},l=s=>{const t=document.querySelector(`${s} .top-error`);t.style.display="none"},e=(s,t)=>{const o=s.closest(".input-group");o.addClass("error"),o.find(".error-message").html(t)},m=(s,t)=>{if(t){jQuery(`${s} .mp-loading`).show(),r(s);return}jQuery(`${s} .mp-loading`).hide(),c(s)},v=s=>/^\d+$/.test(s)?s.length>=5&&s.length<=14:!1;jQuery(function(s){const t="#mp-login-form",o=s(t).find('input[name="log"]'),i=s(t).find('input[name="pwd"]');s(t).submit(function(a){a.preventDefault();const p={action:"login",log:o.val(),pwd:i.val(),rememberme:s(t).find("#rememberme").is(":checked"),redirect_to:s(t).find('input[name="redirect_to"]').val(),testcookie:s(t).find('input[name="testcookie"]').val()};l(t),m(t,!0),s.ajax({type:"POST",url:"/wp-admin/admin-ajax.php",data:p,success:function(u){if(u.data.code==="incorrect_password"&&(u.data.message=`<strong>Error:</strong> The password you entered for the email address <strong>${o.val()}</strong> is incorrect. <a href="/login?action=forgot_pass">Lost your password?</a>`),u.success){window.location.href=u.data.redirect_to;return}s(t).find(".top-error").html(`${u.data.message}`).show(),m(t,!1)},error:function(u){m(t,!1)}})}),o.on("blur",function(){const a=s(this).val();if(!a){e(s(this),"Email is required"),r(t);return}if(!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,})+$/.test(a)){e(s(this),"Email address is invalid."),r(t);return}l(t),s(this).closest(".input-group").removeClass("error"),s(this).closest(".input-group").find(".error-message").html(""),c(t)}),i.on("blur",function(){const a=s(this).val();if(!a){e(s(this),"Password is required"),r(t);return}if(!a.match(/^(?=.*\d)(?=.*[a-z]).{8,}$/)){e(s(this),"Password: min 8 chars, 1 letter, 1 number."),r(t);return}l(t),s(this).closest(".input-group").removeClass("error"),s(this).closest(".input-group").find(".error-message").html(""),c(t)})});jQuery(function(s){const t="#forget-password-form",o=s(t).find('input[name="user-login"]');s(t).submit(function(i){i.preventDefault();const a={action:"lostpassword",user_login:o.val()};l(t),m(t,!0),s.ajax({type:"POST",url:"/wp-admin/admin-ajax.php",data:a,success:function(p){if(!p.success){s(".top-error").html(p.data.message).show(),m(t,!1);return}const u=`<strong>Password reset link sent</strong>
                <p><small>Please click on the confirmation link that was just sent to your email address.</small></p>`;s(".forgot-success").html(u).show(),m(t,!1)}})}),o.on("blur",function(){const i=s(this).val();if(!i){e(s(this),"Username or Email field is required"),r(t);return}if(i.includes("@")&&!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,})+$/.test(i)){e(s(this),"Email address is invalid."),r(t);return}if(!/^[a-zA-Z0-9@.]+$/.test(i)){e(s(this),"Username must be alphanumeric characters."),r(t);return}l(t),s(this).closest(".input-group").removeClass("error"),s(this).closest(".input-group").find(".error-message").html(""),c(t)})});(function(s){s(document).ready(function(){const t="#reset-password-form",o=s(t).find('input[name="pwd"]'),i=s(t).find('input[name="confirm_pwd"]');s(t).on("submit",function(a){a.preventDefault();const p=s(this),u=p.find('input[name="key"]').val(),f=p.find('input[name="login"]').val();m(t,!0),s.ajax({url:"/wp-admin/admin-ajax.php",type:"POST",data:{action:"resetpassword",key:u,login:f,password:o.val()},beforeSend:function(){},success:function(d){if(!d.success){s(".top-error").html(d.data.message).show(),m(t,!1);return}const g=`<strong>Your password is reset.</strong>
            <p><small><a href="/login">Click here</a> login with your new password.</small></p>`;s(".reset-success").html(g).show(),m(t,!1)},error:function(){console.log("AJAX request failed")},complete:function(){}})}),o.on("blur",function(){const a=s(this).val();if(!a){e(s(this),"Password is required"),r(t);return}if(!a.match(/^(?=.*\d)(?=.*[a-z]).{8,}$/)){e(s(this),"Password: min 8 chars, 1 letter, 1 number."),r(t);return}s(this).closest(".input-group").removeClass("error"),s(this).closest(".input-group").find(".error-message").html(""),l(t),c(t)}),i.on("blur",function(){if(!s(this).val()){e(s(this),"Confirm password is required"),r(t);return}if(o.val()!==i.val()){e(s(this),"Password does not match"),e(i,"Password does not match"),r(t);return}s(i).closest(".input-group").removeClass("error"),s(i).closest(".input-group").find(".error-message").html(""),l(t),c(t)})})})(jQuery);jQuery(function(s){const t="#mp-signup-form",o=s(t).find('input[name="first_name"]'),i=s(t).find('input[name="last_name"]'),a=s(t).find('input[name="organization"]'),p=s(t).find('input[name="phone"]'),u=s(t).find('input[name="log"]'),f=s(t).find('input[name="pwd"]'),d=s(t).find('input[name="confirm_pwd"]'),g=s(t).find('input[name="nonce"]');s(t).submit(function(n){if(n.preventDefault(),!u.val()||!f.val()||!d.val()){s(t).find(".top-error").html("Please fill all fields").show();return}const w={action:"signup",log:u.val(),pwd:f.val(),phone:p.val(),organization:a.val(),first_name:o.val(),last_name:i.val(),nonce:g.val()};l(t),m(t,!0),s.ajax({type:"POST",url:"/wp-admin/admin-ajax.php",data:w,success:function(h){if(h.success){s(t).find(".signup-success").html(`${h.data.message}`).show(),u.val(""),f.val(""),d.val(""),m(t,!1),s("html, body").animate({scrollTop:0},"fast");return}s(t).find(".top-error").html(`${h.data.message}`).show(),u.val(""),f.val(""),d.val(""),m(t,!1)},error:function(h){m(t,!1)}})}),o.on("blur",function(){const n=s(this).val();if(!n){e(s(this),"First Name is required."),r(t);return}if(n.length<3){e(s(this),"First Name is too short"),r(t);return}l(t),s(this).closest(".input-group").removeClass("error"),s(this).closest(".input-group").find(".error-message").html(""),c(t)}),i.on("blur",function(){const n=s(this).val();if(!n){e(s(this),"Last Name is required."),r(t);return}if(n.length<3){e(s(this),"Last Name is too short"),r(t);return}l(t),s(this).closest(".input-group").removeClass("error"),s(this).closest(".input-group").find(".error-message").html(""),c(t)}),a.on("blur",function(){const n=s(this).val();if(!n){e(s(this),"Organization Name is required."),r(t);return}if(n.length<3){e(s(this),"Organization Name is too short"),r(t);return}l(t),s(this).closest(".input-group").removeClass("error"),s(this).closest(".input-group").find(".error-message").html(""),c(t)}),p.on("blur",function(){const n=s(this).val();if(n){if(!v(n)){e(s(this),"Phone number must be 5-8 digits."),r(t);return}l(t),s(this).closest(".input-group").removeClass("error"),s(this).closest(".input-group").find(".error-message").html(""),c(t)}}),u.on("blur",function(){const n=s(this).val();if(!n){e(s(this),"Email is required"),r(t);return}if(!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,})+$/.test(n)){e(s(this),"Email address is invalid."),r(t);return}l(t),s(this).closest(".input-group").removeClass("error"),s(this).closest(".input-group").find(".error-message").html(""),c(t)}),f.on("blur",function(){const n=s(this).val();if(!n){e(s(this),"Password is required"),r(t);return}if(!n.match(/^(?=.*\d)(?=.*[a-z]).{8,}$/)){e(s(this),"Password: min 8 chars, 1 letter, 1 number."),r(t);return}s(this).closest(".input-group").removeClass("error"),s(this).closest(".input-group").find(".error-message").html(""),l(t),c(t)}),d.on("blur",function(){if(!s(this).val()){e(s(this),"Confirm password is required"),r(t);return}if(f.val()!==d.val()){e(s(this),"Password does not match"),e(d,"Password does not match"),r(t);return}s(d).closest(".input-group").removeClass("error"),s(d).closest(".input-group").find(".error-message").html(""),l(t),c(t)})});
})();